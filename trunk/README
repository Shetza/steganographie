*** TP JSP/JDBC ***

Description
--------------------

TP 2 de Construction d'Applications Réparties Avancées :

Développement d'une application Web à base de JSP et de JDBC 
permettant la gestion de comptes bancaires.

MASTER 2 Professionnel IAGL :
	Ingénierie et Architecture des Grands Logiciels


Auteurs
--------------------

DELEBARRE Johann (j.delebarre@etudiant.univ-lille1.fr)
WYLLEMAN Julien (julien.wylleman@etudiant.univ-lille1.fr)


Technologies
--------------------

Java (http://java.sun.com/)
Apache Ant (http://ant.apache.org/)
JOnAS (http://jonas.objectweb.org/)


Version 1.0 - 22 nov. 2006
--------------------

Java version 1.5.0_06
Apache Ant version 1.6.2
JOnAS version 4.7.7
JOnAS vendor ObjectWeb


Structure de l'archive
--------------------

└───Gestionnaire de comptes en JSP
    ├───conf
    ├───lib
    ├───src
    │   ├───controllers
    │   ├───util
    │   └───views
    └───static
        ├───img
        ├───META-INF
        ├───WEB-INF
        └───uml
            ├───classes
            └───bdd


Détails du TP
--------------------

Ci-joint le manuel utilisateur: 'Manual.html'

1. Fonctions du service de gestion de comptes

Les fonctions proposées pour la gestion de comptes sont les suivantes :
	# créer un compte avec un titulaire et un montant initial
	# supprimer le compte d'un titulaire
	# afficher la liste des comptes (titulaires + montants)
	# rechercher un ou plusieurs comptes
	# créditer un compte
	# débiter un compte
	# transférer un montant entre deux comptes
	# consulter l'historique d'un compte


2. Architecture logicielle

Le service de gestion de comptes a été développé comme suit.
La présentation à l'utilisateur (les vues) est conçue à base de JSP.
Le traitement associé à chaque fonctionnalité est effectué par une Servlet.
Les Servlets communiquent avec la base de données par 
l'intermédiaire d'un adaptateur de comptes.
Cet adaptateur interagit avec la base de données.


3. Utilisation du service de gestion de comptes

Toute la phase de compilation/execution du projet est gérée par Ant 
au moyen des fichiers 'build.xml' et 'build.properties'.

/!\ 
	Toutes les manipulations expliquées ci-aprés sont à effectuer 
	à la racine du projet. 
/!\


3.1. Lancement de JOnAS

	$> jonas start


3.2. Gestion de la base de données

Cette partie n'est à faire qu'une seule fois au premier lancement.
La commande suivante permet de créer et d'initialiser la table 
'comptes' utilisée par l'application.
Deux fichiers de configurations sont nécessaires à la bonne
exécution de la commande : 'rcfile' & 'sqlfile'.
L'emplacement de ces fichiers est défini dans le fichier de
configuration de Ant : 'build.properties'.

	$> ant database

/!\ 
	Si la commande précédente ne fonctionne pas, 
	vous pouvez toujours exécuter l'une des commandes
	suivantes en fontion de votre système d'exploitation.
	
	$> java -jar %JONAS_ROOT%\lib\commons\jonas\hsqldb.jar --autoCommit --continueOnErr --rcfile conf\sqltool.rc dbjonas conf\bdd.sql	# Windows
	$> java -jar $JONAS_ROOT/lib/commons/jonas/hsqldb.jar --autoCommit --continueOnErr --rcfile conf/sqltool.rc dbjonas conf/bdd.sql	# Linux
/!\


3.3. Création de l'archive war

Le fichier de configuration de Ant, 'build.properties', 
définit le nom de l'archive war grâce à la variable 'warfilename'.

	$> ant war


3.4. Déploiement de l'archive war dans JOnAS

Ant permet le déploiement automatique de l'archive war
dans JOnAS. Afin d'assurer le bon fonctionnement de cette tache, 
veillez à disposer d'un répertoire 'lib' à la racine du projet
contenant l'archive 'ow_jonas_ant.jar'. Veillez également à 
avoir affecter à la variable d'environnement 'JONAS_ROOT' 
le nom complet du répertoire dans lequel vous avez installé JOnAS.

	$> ant deploy

Remarque:
Il existe la commande 'ant undeploy' permet de retirer le war.
Cette commande est appelée avant chaque déploiement ce qui
peut parfois déclancher des erreurs dans la console, 
notamment au premier deploiement. Pas d'inquiétudes, cette erreur
n'a pas d'incidence sur le reste de l'exécution.


3.5. Lancement du navigateur sur l'application

Encore une fois, il est possible d'utiliser Ant pour ce faire.

	$> ant run
	
Cette commande lance le browser web, spécifié dans le fichier
de configuration 'build.properties', sur la page d'accueil
du service de gestion de comptes. L'adresse de cette page est, 
elle aussi, déclarée dans le fichier de configuration de Ant.

Si vous ne désirez pas utiliser cette fonctionalité ou si
celle-ci ne fonctionne pas correctement, vous pouvez toujours
positionner votre browser web à l'adresse suivante:
	
	http://localhost:9000/AccountsManager/


Enjoy ! 
